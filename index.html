<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>校园易生活 | 智能校园服务平台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== 全局变量和重置 ===== */
        :root {
            --primary: #2A2D43;
            --primary-light: #3C3F54;
            --secondary: #6C5B7B;
            --accent: #C06C84;
            --success: #4ECDC4;
            --warning: #FFD166;
            --danger: #EF476F;
            --light: #F8F9FA;
            --dark: #1A1B26;
            --gray: #8E8E93;
            --gray-light: #E5E5EA;
            --shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 20px 60px rgba(0, 0, 0, 0.12);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --border-radius: 20px;
            --border-radius-sm: 12px;
            --gradient-primary: linear-gradient(135deg, #2A2D43 0%, #6C5B7B 100%);
            --gradient-accent: linear-gradient(135deg, #C06C84 0%, #F67280 100%);
            --gradient-success: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            --gradient-warning: linear-gradient(135deg, #FFD166 0%, #FF9A3C 100%);
            --gradient-danger: linear-gradient(135deg, #EF476F 0%, #D32F2F 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'SF Pro Display', 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: linear-gradient(135deg, #F8F9FA 0%, #F0F2F5 100%);
            color: var(--dark);
            line-height: 1.7;
            min-height: 100vh;
            overflow-x: hidden;
            font-weight: 400;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        /* ===== 自定义滚动条 ===== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.03);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--secondary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* ===== 玻璃态效果 ===== */
        .glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* ===== 按钮样式 ===== */
        .btn {
            padding: 16px 32px;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 8px 24px rgba(42, 45, 67, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 40px rgba(42, 45, 67, 0.3);
        }

        .btn-accent {
            background: var(--gradient-accent);
            color: white;
            box-shadow: 0 8px 24px rgba(192, 108, 132, 0.2);
        }

        .btn-accent:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 40px rgba(192, 108, 132, 0.3);
        }

        .btn-success {
            background: var(--gradient-success);
            color: white;
            box-shadow: 0 8px 24px rgba(78, 205, 196, 0.2);
        }

        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 40px rgba(78, 205, 196, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-light);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* ===== 导航栏 ===== */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 20px 0;
            transition: var(--transition);
        }

        header.scrolled {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            padding: 15px 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-primary);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 8px 20px rgba(42, 45, 67, 0.15);
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }

        .nav-links {
            display: flex;
            gap: 35px;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--primary);
            font-weight: 600;
            font-size: 1.05rem;
            padding: 10px 0;
            position: relative;
            transition: var(--transition);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--accent);
            border-radius: 3px;
            transition: var(--transition);
        }

        .nav-links a:hover {
            color: var(--accent);
        }

        .nav-links a:hover::after,
        .nav-links a.active::after {
            width: 100%;
        }

        .nav-links a.active {
            color: var(--accent);
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-menu {
            position: relative;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow);
            min-width: 200px;
            margin-top: 10px;
            display: none;
            z-index: 1000;
            overflow: hidden;
        }

        .user-dropdown.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dropdown-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
            border-bottom: 1px solid var(--gray-light);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: var(--light);
            color: var(--accent);
        }

        .dropdown-item i {
            width: 20px;
            text-align: center;
        }

        /* ===== 页面容器 ===== */
        .page-container {
            min-height: 100vh;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .page-container.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== 登录注册页面 ===== */
        .auth-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 100px 0;
            position: relative;
            overflow: hidden;
        }

        .auth-page::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -30%;
            width: 800px;
            height: 800px;
            background: var(--gradient-primary);
            border-radius: 50%;
            opacity: 0.05;
            z-index: -1;
        }

        .auth-page::after {
            content: '';
            position: absolute;
            bottom: -40%;
            left: -20%;
            width: 600px;
            height: 600px;
            background: var(--gradient-accent);
            border-radius: 50%;
            opacity: 0.05;
            z-index: -1;
        }

        .auth-container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .auth-hero {
            padding: 60px;
            border-radius: var(--border-radius);
            background: var(--gradient-primary);
            color: white;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .auth-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g fill="white" fill-opacity="0.05"><circle cx="30" cy="30" r="5"/></g></svg>');
        }

        .auth-hero h1 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .auth-hero p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 40px;
        }

        .auth-features {
            list-style: none;
            margin-top: 40px;
        }

        .auth-features li {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .auth-features li i {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .auth-box {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            position: relative;
        }

        .auth-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-accent);
        }

        .auth-tabs {
            display: flex;
            background: var(--light);
        }

        .auth-tab {
            flex: 1;
            padding: 24px;
            text-align: center;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--gray);
            position: relative;
            overflow: hidden;
        }

        .auth-tab.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.05);
        }

        .auth-tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.5);
            color: var(--primary);
        }

        .auth-content {
            padding: 50px;
        }

        .auth-form {
            display: none;
            animation: slideIn 0.5s ease;
        }

        .auth-form.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .auth-form h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .auth-form .subtitle {
            color: var(--gray);
            margin-bottom: 40px;
            font-size: 1.05rem;
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary);
            font-size: 0.95rem;
            letter-spacing: 0.5px;
        }

        .form-control {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid var(--gray-light);
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
            color: var(--primary);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(192, 108, 132, 0.1);
        }

        .form-control.error {
            border-color: var(--danger);
        }

        .form-check {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
        }

        .form-check input {
            width: 20px;
            height: 20px;
            accent-color: var(--accent);
        }

        .auth-divider {
            text-align: center;
            margin: 40px 0;
            position: relative;
        }

        .auth-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gray-light);
        }

        .auth-divider span {
            background: white;
            padding: 0 20px;
            color: var(--gray);
            font-size: 0.95rem;
            position: relative;
        }

        .social-login {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .social-btn {
            padding: 16px;
            border: 2px solid var(--gray-light);
            border-radius: var(--border-radius-sm);
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            color: var(--primary);
        }

        .social-btn:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }

        .social-btn i {
            font-size: 1.5rem;
        }

        .social-btn.wechat i { color: #07C160; }
        .social-btn.qq i { color: #12B7F5; }
        .social-btn.email i { color: var(--accent); }

        /* ===== 访客登录 ===== */
        .guest-login {
            text-align: center;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1) 0%, rgba(68, 160, 141, 0.1) 100%);
            border-radius: var(--border-radius-sm);
            border: 2px solid rgba(78, 205, 196, 0.2);
        }

        .guest-login h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .guest-login p {
            color: var(--gray);
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        /* ===== 首页样式 ===== */
        .home-hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            padding-top: 100px;
        }

        .home-hero::before {
            content: '';
            position: absolute;
            top: -300px;
            right: -200px;
            width: 800px;
            height: 800px;
            background: var(--gradient-primary);
            border-radius: 50%;
            opacity: 0.05;
            z-index: -1;
        }

        .hero-content {
            max-width: 700px;
            position: relative;
            z-index: 1;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(192, 108, 132, 0.1);
            color: var(--accent);
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .hero-badge i {
            font-size: 1.2rem;
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 30px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--gray);
            margin-bottom: 50px;
            max-width: 600px;
            line-height: 1.8;
        }

        .hero-actions {
            display: flex;
            gap: 20px;
            margin-bottom: 80px;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            padding: 40px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(0, 0, 0, 0.03);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 10px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--gray);
            font-weight: 500;
        }

        /* ===== 功能模块样式 ===== */
        .features-section {
            padding: 150px 0;
            position: relative;
        }

        .features-section::before {
            content: '';
            position: absolute;
            bottom: -200px;
            left: -200px;
            width: 600px;
            height: 600px;
            background: var(--gradient-accent);
            border-radius: 50%;
            opacity: 0.05;
            z-index: -1;
        }

        .section-header {
            text-align: center;
            margin-bottom: 80px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .section-subtitle {
            color: var(--accent);
            font-weight: 600;
            font-size: 1.1rem;
            letter-spacing: 1.5px;
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .section-title {
            font-size: 3rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .section-description {
            font-size: 1.2rem;
            color: var(--gray);
            line-height: 1.7;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 40px;
            margin-bottom: 100px;
        }

        .module-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 50px 40px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.03);
            cursor: pointer;
        }

        .module-card:hover {
            transform: translateY(-20px);
            box-shadow: var(--shadow-hover);
        }

        .module-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-primary);
        }

        .module-icon {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            font-size: 2.2rem;
            color: var(--primary);
            transition: var(--transition);
        }

        .module-card:hover .module-icon {
            background: var(--gradient-accent);
            color: white;
            transform: scale(1.1) rotate(5deg);
        }

        .module-card h3 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .module-card p {
            color: var(--gray);
            margin-bottom: 30px;
            font-size: 1.05rem;
            line-height: 1.7;
        }

        .module-features {
            list-style: none;
            margin-bottom: 30px;
        }

        .module-features li {
            padding: 10px 0;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
        }

        .module-features li i {
            color: var(--success);
            font-size: 1rem;
        }

        /* ===== 响应式设计 ===== */
        @media (max-width: 1200px) {
            .container {
                padding: 0 25px;
            }
            
            .hero-title {
                font-size: 3.5rem;
            }
            
            .auth-container {
                grid-template-columns: 1fr;
                max-width: 600px;
            }
            
            .auth-hero {
                display: none;
            }
        }

        @media (max-width: 992px) {
            .nav-links {
                display: none;
            }
            
            .hero-title {
                font-size: 3rem;
            }
            
            .section-title {
                font-size: 2.5rem;
            }
            
            .hero-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-actions {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .section-title {
                font-size: 2.2rem;
            }
            
            .auth-content {
                padding: 40px 30px;
            }
            
            .social-login {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 20px;
            }
            
            .hero-title {
                font-size: 2.2rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .auth-content {
                padding: 30px 20px;
            }
            
            .module-card {
                padding: 40px 30px;
            }
        }

        /* ===== 动画效果 ===== */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        /* ===== 工具类 ===== */
        .text-accent {
            color: var(--accent);
        }

        .text-success {
            color: var(--success);
        }

        .text-warning {
            color: var(--warning);
        }

        .text-danger {
            color: var(--danger);
        }

        .mb-30 { margin-bottom: 30px; }
        .mt-30 { margin-top: 30px; }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <header class="glass">
        <div class="container">
            <nav class="nav-container">
                <a href="#" class="logo" onclick="showPage('home')">
                    <div class="logo-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="logo-text">校园易生活</div>
                </a>
                
                <ul class="nav-links">
                    <li><a href="#" onclick="showPage('home')" class="active">首页</a></li>
                    <li><a href="#" onclick="showPage('notice')">校园通知</a></li>
                    <li><a href="#" onclick="showPage('lost')">失物招领</a></li>
                    <li><a href="#" onclick="showPage('trade')">二手交易</a></li>
                    <li><a href="#" onclick="showPage('schedule')">课表查询</a></li>
                </ul>
                
                <div class="user-actions" id="user-actions">
                    <!-- 未登录状态 -->
                    <div id="unauthenticated-state" style="display: flex; align-items: center; gap: 20px;">
                        <button class="btn btn-outline" onclick="showPage('auth')">
                            <i class="fas fa-sign-in-alt"></i> 登录
                        </button>
                        <button class="btn btn-accent" onclick="showPage('auth')">
                            <i class="fas fa-user-plus"></i> 注册
                        </button>
                    </div>
                    
                    <!-- 已登录状态 -->
                    <div id="authenticated-state" style="display: none;">
                        <div class="user-menu">
                            <button class="btn btn-outline" onclick="toggleUserMenu()">
                                <i class="fas fa-user-circle"></i>
                                <span id="username">用户</span>
                                <i class="fas fa-chevron-down" style="font-size: 0.8rem;"></i>
                            </button>
                            <div class="user-dropdown" id="user-dropdown">
                                <a href="#" class="dropdown-item" onclick="showProfile()">
                                    <i class="fas fa-user"></i>
                                    <span>个人资料</span>
                                </a>
                                <a href="#" class="dropdown-item" onclick="showMyPosts()">
                                    <i class="fas fa-list"></i>
                                    <span>我的发布</span>
                                </a>
                                <a href="#" class="dropdown-item" onclick="showSettings()">
                                    <i class="fas fa-cog"></i>
                                    <span>设置</span>
                                </a>
                                <div class="dropdown-item" onclick="logout()" style="color: var(--danger); cursor: pointer;">
                                    <i class="fas fa-sign-out-alt"></i>
                                    <span>退出登录</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- 首页 -->
    <div id="home" class="page-container active">
        <section class="home-hero">
            <div class="container">
                <div class="hero-content fade-in-up">
                    <div class="hero-badge">
                        <i class="fas fa-star"></i>
                        <span>2024年度最受欢迎的校园服务平台</span>
                    </div>
                    
                    <h1 class="hero-title">
                        重新定义<br>
                        <span class="text-accent">校园生活体验</span>
                    </h1>
                    
                    <p class="hero-subtitle">
                        校园易生活整合四大核心功能，为高校学生提供一站式智能生活服务解决方案。
                        让校园生活更加便捷、高效、有趣。
                    </p>
                    
                    <div class="hero-actions">
                        <button class="btn btn-primary" onclick="showPage('auth')">
                            <i class="fas fa-rocket"></i> 立即体验
                            <span class="btn-arrow">→</span>
                        </button>
                        <button class="btn btn-outline" onclick="loginAsGuest()">
                            <i class="fas fa-user"></i> 访客体验
                        </button>
                    </div>
                    
                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number">50K+</div>
                            <div class="stat-label">活跃用户</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">4.8</div>
                            <div class="stat-label">用户评分</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">100+</div>
                            <div class="stat-label">合作高校</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">全天候服务</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 功能模块区域 -->
        <section class="features-section">
            <div class="container">
                <div class="section-header fade-in-up">
                    <div class="section-subtitle">核心功能</div>
                    <h2 class="section-title">一站式校园生活解决方案</h2>
                    <p class="section-description">
                        四大功能模块全面覆盖校园生活需求，每个模块都经过精心设计和优化，
                        为您提供最佳的用户体验。
                    </p>
                </div>
                
                <div class="modules-grid">
                    <!-- 校园通知模块 -->
                    <div class="module-card fade-in-up" onclick="showPage('notice')">
                        <div class="module-icon">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <h3>校园通知</h3>
                        <p>实时获取学校各类通知公告，重要信息不再错过，个性化订阅让您只关注关心的内容。</p>
                        <ul class="module-features">
                            <li><i class="fas fa-check"></i> 实时推送重要通知</li>
                            <li><i class="fas fa-check"></i> 智能分类与筛选</li>
                            <li><i class="fas fa-check"></i> 个性化订阅设置</li>
                            <li><i class="fas fa-check"></i> 历史记录云端同步</li>
                        </ul>
                        <button class="btn btn-outline">
                            <span>探索功能</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <!-- 失物招领模块 -->
                    <div class="module-card fade-in-up" onclick="showPage('lost')" style="animation-delay: 0.1s;">
                        <div class="module-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>失物招领</h3>
                        <p>快速发布寻物启事或拾物招领，智能匹配算法提高物品找回率，保护隐私的同时高效沟通。</p>
                        <ul class="module-features">
                            <li><i class="fas fa-check"></i> AI智能匹配算法</li>
                            <li><i class="fas fa-check"></i> 图片上传与识别</li>
                            <li><i class="fas fa-check"></i> 隐私联系方式保护</li>
                            <li><i class="fas fa-check"></i> 地图定位与导航</li>
                        </ul>
                        <button class="btn btn-outline">
                            <span>探索功能</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <!-- 二手交易模块 -->
                    <div class="module-card fade-in-up" onclick="showPage('trade')" style="animation-delay: 0.2s;">
                        <div class="module-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>二手交易</h3>
                        <p>安全可靠的校园二手交易平台，实名认证保障交易安全，让闲置物品找到新的价值。</p>
                        <ul class="module-features">
                            <li><i class="fas fa-check"></i> 实名认证安全保障</li>
                            <li><i class="fas fa-check"></i> 在线沟通与交易</li>
                            <li><i class="fas fa-check"></i> 信用评价体系</li>
                            <li><i class="fas fa-check"></i> 物流配送支持</li>
                        </ul>
                        <button class="btn btn-outline">
                            <span>探索功能</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <!-- 课表查询模块 -->
                    <div class="module-card fade-in-up" onclick="showPage('schedule')" style="animation-delay: 0.3s;">
                        <div class="module-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h3>课表查询</h3>
                        <p>智能课表管理系统，支持多格式导出与提醒功能，让课程安排一目了然，学习更高效。</p>
                        <ul class="module-features">
                            <li><i class="fas fa-check"></i> 可视化课表展示</li>
                            <li><i class="fas fa-check"></i> 智能课程冲突检测</li>
                            <li><i class="fas fa-check"></i> 多平台数据同步</li>
                            <li><i class="fas fa-check"></i> 考试与作业提醒</li>
                        </ul>
                        <button class="btn btn-outline">
                            <span>探索功能</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- 登录注册页面 -->
    <div id="auth" class="page-container">
        <div class="auth-page">
            <div class="container">
                <div class="auth-container">
                    <!-- 左侧展示区域 -->
                    <div class="auth-hero">
                        <h1>加入校园易生活</h1>
                        <p>开启智能校园生活体验，享受便捷高效的服务</p>
                        
                        <ul class="auth-features">
                            <li>
                                <i class="fas fa-shield-alt"></i>
                                <span>安全可靠的实名认证系统</span>
                            </li>
                            <li>
                                <i class="fas fa-bolt"></i>
                                <span>快速响应的智能服务</span>
                            </li>
                            <li>
                                <i class="fas fa-users"></i>
                                <span>活跃的校园互助社区</span>
                            </li>
                            <li>
                                <i class="fas fa-sync-alt"></i>
                                <span>多设备数据实时同步</span>
                            </li>
                        </ul>
                        
                        <div style="margin-top: auto;">
                            <div style="display: flex; align-items: center; gap: 20px; margin-top: 40px;">
                                <div style="display: flex; align-items: center;">
                                    <div style="width: 50px; height: 50px; border-radius: 12px; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                        <i class="fas fa-quote-left" style="opacity: 0.7;"></i>
                                    </div>
                                    <div>
                                        <div style="font-weight: 600;">"校园易生活改变了我的大学生活"</div>
                                        <div style="opacity: 0.8; font-size: 0.9rem;">- 清华大学 张同学</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 右侧表单区域 -->
                    <div class="auth-box">
                        <div class="auth-tabs">
                            <div class="auth-tab active" onclick="switchAuthTab('login')">登录账户</div>
                            <div class="auth-tab" onclick="switchAuthTab('register')">注册账户</div>
                        </div>
                        
                        <!-- 登录表单 -->
                        <div id="login-form" class="auth-content auth-form active">
                            <h2>欢迎回来</h2>
                            <p class="subtitle">请登录您的账户以继续使用服务</p>
                            
                            <form id="loginForm">
                                <div class="form-group">
                                    <label class="form-label">邮箱地址或学号</label>
                                    <input type="text" class="form-control" id="login-identifier" placeholder="邮箱或学号" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">密码</label>
                                    <input type="password" class="form-control" id="login-password" placeholder="请输入密码" required>
                                </div>
                                
                                <div class="form-check">
                                    <input type="checkbox" id="remember-me">
                                    <label for="remember-me">记住登录状态</label>
                                    <a href="#" style="margin-left: auto; color: var(--accent); text-decoration: none; font-weight: 600;" onclick="showForgotPassword()">忘记密码？</a>
                                </div>
                                
                                <button type="submit" class="btn btn-primary" style="width: 100%;">
                                    <i class="fas fa-sign-in-alt"></i> 登录账户
                                </button>
                            </form>
                            
                            <div class="guest-login">
                                <h3>快速体验</h3>
                                <p>无需注册，立即体验平台核心功能</p>
                                <button class="btn btn-success" onclick="loginAsGuest()" style="width: 100%;">
                                    <i class="fas fa-user-clock"></i> 访客身份体验
                                </button>
                            </div>
                            
                            <div class="auth-divider">
                                <span>或使用以下方式登录</span>
                            </div>
                            
                            <div class="social-login">
                                <button class="social-btn wechat" onclick="socialLogin('wechat')">
                                    <i class="fab fa-weixin"></i>
                                    <span>微信</span>
                                </button>
                                <button class="social-btn qq" onclick="socialLogin('qq')">
                                    <i class="fab fa-qq"></i>
                                    <span>QQ</span>
                                </button>
                                <button class="social-btn email" onclick="socialLogin('email')">
                                    <i class="fas fa-envelope"></i>
                                    <span>邮箱验证</span>
                                </button>
                            </div>
                            
                            <p style="text-align: center; color: var(--gray); margin-top: 30px;">
                                还没有账户？ <a href="#" onclick="switchAuthTab('register')" style="color: var(--accent); text-decoration: none; font-weight: 600;">立即注册</a>
                            </p>
                        </div>
                        
                        <!-- 注册表单 -->
                        <div id="register-form" class="auth-content auth-form">
                            <h2>创建新账户</h2>
                            <p class="subtitle">填写以下信息完成注册</p>
                            
                            <form id="registerForm">
                                <div class="form-group">
                                    <label class="form-label">真实姓名 *</label>
                                    <input type="text" class="form-control" id="register-name" placeholder="请输入真实姓名" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">邮箱地址 *</label>
                                    <input type="email" class="form-control" id="register-email" placeholder="请输入邮箱地址" required>
                                </div>
                                
                                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                                    <div class="form-group">
                                        <label class="form-label">所在学校 *</label>
                                        <select class="form-control" id="register-school" required>
                                            <option value="">请选择学校</option>
                                            <option value="pku">北京大学</option>
                                            <option value="tsinghua">清华大学</option>
                                            <option value="fudan">复旦大学</option>
                                            <option value="zju">浙江大学</option>
                                            <option value="nankai">南开大学</option>
                                            <option value="other">其他学校</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">学院/专业</label>
                                        <input type="text" class="form-control" id="register-major" placeholder="例如：计算机学院">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">学号（可选）</label>
                                    <input type="text" class="form-control" id="register-student-id" placeholder="请输入学号">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">设置密码 *</label>
                                    <input type="password" class="form-control" id="register-password" placeholder="请设置密码（至少8位字符）" required minlength="8">
                                    <div style="font-size: 0.9rem; color: var(--gray); margin-top: 8px;">
                                        建议使用字母、数字和符号组合
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">确认密码 *</label>
                                    <input type="password" class="form-control" id="register-confirm-password" placeholder="请再次输入密码" required>
                                </div>
                                
                                <div class="form-check">
                                    <input type="checkbox" id="terms" required>
                                    <label for="terms">
                                        我已阅读并同意 
                                        <a href="#" style="color: var(--accent);">服务条款</a> 
                                        和 
                                        <a href="#" style="color: var(--accent);">隐私政策</a>
                                    </label>
                                </div>
                                
                                <div class="form-check">
                                    <input type="checkbox" id="newsletter" checked>
                                    <label for="newsletter">接收产品更新和优惠信息</label>
                                </div>
                                
                                <button type="submit" class="btn btn-accent" style="width: 100%;">
                                    <i class="fas fa-user-plus"></i> 创建账户
                                </button>
                            </form>
                            
                            <p style="text-align: center; margin-top: 30px; color: var(--gray);">
                                已有账户？ <a href="#" onclick="switchAuthTab('login')" style="color: var(--accent); text-decoration: none; font-weight: 600;">立即登录</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 校园通知页面 -->
    <div id="notice" class="page-container">
        <div class="container module-page">
            <div class="module-header fade-in-up">
                <h1 class="module-title">
                    <i class="fas fa-bullhorn"></i> 校园通知
                </h1>
                <p class="module-subtitle">
                    实时获取校园最新通知公告，智能分类推送，让您不错过任何重要信息
                </p>
                <button class="btn btn-primary" onclick="checkLoginBeforeAction('publishNotice')" id="publish-notice-btn">
                    <i class="fas fa-plus"></i> 发布通知
                </button>
            </div>
            
            <div class="module-content">
                <div class="module-actions">
                    <button class="module-action-btn active" onclick="filterNotices('all')">
                        <i class="fas fa-list"></i> 全部通知
                    </button>
                    <button class="module-action-btn" onclick="filterNotices('important')">
                        <i class="fas fa-exclamation-circle"></i> 重要通知
                    </button>
                    <button class="module-action-btn" onclick="filterNotices('academic')">
                        <i class="fas fa-graduation-cap"></i> 学术通知
                    </button>
                    <button class="module-action-btn" onclick="filterNotices('activity')">
                        <i class="fas fa-calendar-alt"></i> 活动通知
                    </button>
                    <div style="margin-left: auto;">
                        <div style="position: relative;">
                            <i class="fas fa-search" style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: var(--gray);"></i>
                            <input type="text" class="form-control" placeholder="搜索通知..." style="padding-left: 50px; width: 300px;" oninput="searchNotices(this.value)">
                        </div>
                    </div>
                </div>
                
                <div id="notices-container" class="data-grid">
                    <!-- 通知卡片会动态加载到这里 -->
                </div>
                
                <div id="no-notices" class="empty-state" style="display: none;">
                    <div class="empty-state-icon">
                        <i class="fas fa-bullhorn"></i>
                    </div>
                    <h3>暂无通知</h3>
                    <p>当前没有通知信息，点击上方"发布通知"按钮创建第一条通知</p>
                    <button class="btn btn-primary" onclick="checkLoginBeforeAction('publishNotice')">
                        <i class="fas fa-plus"></i> 发布第一条通知
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 失物招领页面 -->
    <div id="lost" class="page-container">
        <div class="container module-page">
            <div class="module-header fade-in-up">
                <h1 class="module-title">
                    <i class="fas fa-search"></i> 失物招领
                </h1>
                <p class="module-subtitle">
                    发布寻物启事或拾物招领，智能匹配算法帮助物品快速找到主人
                </p>
                <div style="display: flex; gap: 15px;">
                    <button class="btn btn-accent" onclick="checkLoginBeforeAction('publishLost')">
                        <i class="fas fa-plus"></i> 发布寻物
                    </button>
                    <button class="btn btn-success" onclick="checkLoginBeforeAction('publishFound')">
                        <i class="fas fa-hand-holding-heart"></i> 发布招领
                    </button>
                </div>
            </div>
            
            <div class="module-content">
                <div class="module-actions">
                    <button class="module-action-btn active" onclick="filterLostItems('all')">
                        <i class="fas fa-list"></i> 全部记录
                    </button>
                    <button class="module-action-btn" onclick="filterLostItems('lost')">
                        <i class="fas fa-question-circle"></i> 寻物启事
                    </button>
                    <button class="module-action-btn" onclick="filterLostItems('found')">
                        <i class="fas fa-check-circle"></i> 失物招领
                    </button>
                    <button class="module-action-btn" onclick="filterLostItems('solved')">
                        <i class="fas fa-check-double"></i> 已解决
                    </button>
                    <div style="margin-left: auto; display: flex; gap: 15px;">
                        <select class="form-control" style="width: 160px;" onchange="filterLostItemsByCategory(this.value)">
                            <option value="all">所有类别</option>
                            <option value="certificate">证件</option>
                            <option value="electronic">电子设备</option>
                            <option value="book">书籍</option>
                            <option value="clothing">衣物</option>
                            <option value="other">其他</option>
                        </select>
                        <div style="position: relative;">
                            <i class="fas fa-search" style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: var(--gray);"></i>
                            <input type="text" class="form-control" placeholder="搜索物品..." style="padding-left: 50px; width: 250px;" oninput="searchLostItems(this.value)">
                        </div>
                    </div>
                </div>
                
                <div id="lost-items-container" class="data-grid">
                    <!-- 失物招领卡片会动态加载到这里 -->
                </div>
                
                <div id="no-lost-items" class="empty-state" style="display: none;">
                    <div class="empty-state-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3>暂无记录</h3>
                    <p>当前没有失物招领记录，点击上方按钮发布第一条记录</p>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button class="btn btn-accent" onclick="checkLoginBeforeAction('publishLost')">
                            <i class="fas fa-plus"></i> 发布寻物
                        </button>
                        <button class="btn btn-success" onclick="checkLoginBeforeAction('publishFound')">
                            <i class="fas fa-hand-holding-heart"></i> 发布招领
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 二手交易页面 -->
    <div id="trade" class="page-container">
        <div class="container module-page">
            <div class="module-header fade-in-up">
                <h1 class="module-title">
                    <i class="fas fa-shopping-cart"></i> 二手交易
                </h1>
                <p class="module-subtitle">
                    安全可靠的校园二手交易平台，实名认证保障交易安全，让闲置物品找到新的价值
                </p>
                <button class="btn btn-primary" onclick="checkLoginBeforeAction('publishProduct')">
                    <i class="fas fa-plus"></i> 发布商品
                </button>
            </div>
            
            <div class="module-content">
                <div class="module-actions">
                    <button class="module-action-btn active" onclick="filterProducts('all')">
                        <i class="fas fa-list"></i> 全部商品
                    </button>
                    <button class="module-action-btn" onclick="filterProducts('book')">
                        <i class="fas fa-book"></i> 书籍教材
                    </button>
                    <button class="module-action-btn" onclick="filterProducts('electronic')">
                        <i class="fas fa-laptop"></i> 电子数码
                    </button>
                    <button class="module-action-btn" onclick="filterProducts('clothing')">
                        <i class="fas fa-tshirt"></i> 服饰鞋包
                    </button>
                    <button class="module-action-btn" onclick="filterProducts('daily')">
                        <i class="fas fa-home"></i> 生活用品
                    </button>
                    <div style="margin-left: auto; display: flex; gap: 15px;">
                        <select class="form-control" style="width: 140px;" onchange="sortProducts(this.value)">
                            <option value="newest">最新发布</option>
                            <option value="price_low">价格从低到高</option>
                            <option value="price_high">价格从高到低</option>
                        </select>
                        <div style="position: relative;">
                            <i class="fas fa-search" style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: var(--gray);"></i>
                            <input type="text" class="form-control" placeholder="搜索商品..." style="padding-left: 50px; width: 250px;" oninput="searchProducts(this.value)">
                        </div>
                    </div>
                </div>
                
                <div id="products-container" class="data-grid">
                    <!-- 商品卡片会动态加载到这里 -->
                </div>
                
                <div id="no-products" class="empty-state" style="display: none;">
                    <div class="empty-state-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <h3>暂无商品</h3>
                    <p>当前没有二手商品信息，点击上方"发布商品"按钮发布您的闲置物品</p>
                    <button class="btn btn-primary" onclick="checkLoginBeforeAction('publishProduct')">
                        <i class="fas fa-plus"></i> 发布第一个商品
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 课表查询页面 -->
    <div id="schedule" class="page-container">
        <div class="container module-page">
            <div class="module-header fade-in-up">
                <h1 class="module-title">
                    <i class="fas fa-calendar-alt"></i> 课表查询
                </h1>
                <p class="module-subtitle">
                    智能课表管理系统，支持多格式导出与提醒功能，让课程安排一目了然
                </p>
                <div style="display: flex; gap: 15px;">
                    <button class="btn btn-primary" onclick="checkLoginBeforeAction('addCourse')">
                        <i class="fas fa-plus"></i> 添加课程
                    </button>
                    <button class="btn btn-outline" onclick="exportSchedule()">
                        <i class="fas fa-download"></i> 导出课表
                    </button>
                </div>
            </div>
            
            <div class="module-content">
                <div id="schedule-content">
                    <!-- 课表内容会动态加载到这里 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>校园易生活</h3>
                    <p>致力于为高校学生提供一站式生活服务解决方案，让校园生活更简单、更智能、更美好。</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-weixin"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-weibo"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-qq"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                
                <div class="footer-col">
                    <h3>快速链接</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showPage('home')"><i class="fas fa-chevron-right"></i> 首页</a></li>
                        <li><a href="#" onclick="showPage('notice')"><i class="fas fa-chevron-right"></i> 校园通知</a></li>
                        <li><a href="#" onclick="showPage('lost')"><i class="fas fa-chevron-right"></i> 失物招领</a></li>
                        <li><a href="#" onclick="showPage('trade')"><i class="fas fa-chevron-right"></i> 二手交易</a></li>
                        <li><a href="#" onclick="showPage('schedule')"><i class="fas fa-chevron-right"></i> 课表查询</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>联系我们</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> 北京市海淀区中关村大街</a></li>
                        <li><a href="mailto:contact@campuslife.com"><i class="fas fa-envelope"></i> contact@campuslife.com</a></li>
                        <li><a href="tel:+8613800138000"><i class="fas fa-phone"></i> 400-123-4567</a></li>
                        <li><a href="#"><i class="fas fa-clock"></i> 周一至周五 9:00-18:00</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2024 校园易生活. 版权所有. | 京ICP备12345678号 | Designed with <i class="fas fa-heart" style="color: var(--accent);"></i> for better campus life</p>
            </div>
        </div>
    </footer>

    <script>
        // ===== 用户管理 =====
        const userManager = {
            currentUser: null,
            users: [
                // 示例用户数据
                {
                    id: 1,
                    name: "张同学",
                    email: "zhang@example.com",
                    studentId: "2021123456",
                    school: "清华大学",
                    major: "计算机学院",
                    role: "student",
                    createdAt: "2024-01-15"
                },
                {
                    id: 2,
                    name: "李同学",
                    email: "li@example.com",
                    studentId: "2021123457",
                    school: "北京大学",
                    major: "经济学院",
                    role: "student",
                    createdAt: "2024-02-20"
                }
            ],
            
            // 访客用户
            guestUser: {
                id: 0,
                name: "访客用户",
                email: "guest@campuslife.com",
                role: "guest",
                permissions: {
                    view: true,
                    publish: false,
                    edit: false,
                    delete: false
                }
            },
            
            // 初始化
            init() {
                // 从localStorage恢复登录状态
                const savedUser = localStorage.getItem('campuslife_user');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                    this.updateUI();
                }
                
                // 检查访客状态
                const isGuest = localStorage.getItem('campuslife_guest');
                if (isGuest === 'true') {
                    this.loginAsGuest();
                }
            },
            
            // 用户登录
            login(emailOrStudentId, password) {
                // 简化验证 - 在实际应用中应该与后端API通信
                const user = this.users.find(u => 
                    u.email === emailOrStudentId || 
                    u.studentId === emailOrStudentId
                );
                
                if (user) {
                    // 简化密码验证 - 实际应用中应该使用加密
                    if (password === "123456") { // 示例密码
                        this.currentUser = user;
                        localStorage.setItem('campuslife_user', JSON.stringify(user));
                        localStorage.removeItem('campuslife_guest');
                        this.updateUI();
                        return { success: true, user: user };
                    }
                }
                
                return { 
                    success: false, 
                    message: "邮箱/学号或密码错误，请重试" 
                };
            },
            
            // 访客登录
            loginAsGuest() {
                this.currentUser = this.guestUser;
                localStorage.setItem('campuslife_guest', 'true');
                localStorage.removeItem('campuslife_user');
                this.updateUI();
                return { success: true, user: this.guestUser };
            },
            
            // 用户注册
            register(userData) {
                // 检查邮箱是否已存在
                const emailExists = this.users.some(u => u.email === userData.email);
                if (emailExists) {
                    return { success: false, message: "该邮箱已被注册" };
                }
                
                // 检查学号是否已存在
                if (userData.studentId) {
                    const studentIdExists = this.users.some(u => u.studentId === userData.studentId);
                    if (studentIdExists) {
                        return { success: false, message: "该学号已被注册" };
                    }
                }
                
                // 创建新用户
                const newUser = {
                    id: this.users.length + 1,
                    name: userData.name,
                    email: userData.email,
                    studentId: userData.studentId || '',
                    school: userData.school,
                    major: userData.major || '',
                    role: "student",
                    createdAt: new Date().toISOString().split('T')[0]
                };
                
                this.users.push(newUser);
                this.currentUser = newUser;
                localStorage.setItem('campuslife_user', JSON.stringify(newUser));
                localStorage.removeItem('campuslife_guest');
                this.updateUI();
                
                return { success: true, user: newUser };
            },
            
            // 退出登录
            logout() {
                this.currentUser = null;
                localStorage.removeItem('campuslife_user');
                localStorage.removeItem('campuslife_guest');
                this.updateUI();
                return { success: true };
            },
            
            // 更新UI状态
            updateUI() {
                const unauthenticatedState = document.getElementById('unauthenticated-state');
                const authenticatedState = document.getElementById('authenticated-state');
                const usernameSpan = document.getElementById('username');
                
                if (this.currentUser) {
                    // 用户已登录
                    unauthenticatedState.style.display = 'none';
                    authenticatedState.style.display = 'block';
                    
                    // 更新用户名显示
                    usernameSpan.textContent = this.currentUser.name;
                    
                    // 更新导航栏高亮
                    document.querySelectorAll('.nav-links a').forEach(link => {
                        link.classList.remove('active');
                    });
                    document.querySelector('.nav-links a[onclick*="home"]')?.classList.add('active');
                    
                    // 显示首页
                    showPage('home');
                    
                    // 根据用户角色更新功能可用性
                    this.updateFeatureAccess();
                } else {
                    // 用户未登录
                    unauthenticatedState.style.display = 'flex';
                    authenticatedState.style.display = 'none';
                }
            },
            
            // 更新功能访问权限
            updateFeatureAccess() {
                const isGuest = this.currentUser?.role === 'guest';
                const publishButtons = document.querySelectorAll('[onclick*="checkLoginBeforeAction"]');
                
                publishButtons.forEach(btn => {
                    if (isGuest) {
                        btn.title = "访客无法发布内容，请注册登录";
                        btn.style.opacity = "0.6";
                        btn.style.cursor = "not-allowed";
                    } else {
                        btn.title = "";
                        btn.style.opacity = "1";
                        btn.style.cursor = "pointer";
                    }
                });
            },
            
            // 检查用户是否登录
            isLoggedIn() {
                return this.currentUser !== null;
            },
            
            // 检查用户是否有发布权限
            canPublish() {
                return this.isLoggedIn() && this.currentUser.role !== 'guest';
            },
            
            // 获取当前用户信息
            getCurrentUser() {
                return this.currentUser;
            }
        };
        
        // ===== 通用函数 =====
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.page-container').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示选中的页面
            setTimeout(() => {
                document.getElementById(pageId).classList.add('active');
            }, 50);
            
            // 更新导航栏活动状态
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            
            if (pageId !== 'home' && pageId !== 'auth') {
                const activeLink = document.querySelector(`.nav-links a[onclick*="${pageId}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
            } else if (pageId === 'home') {
                document.querySelector('.nav-links a[onclick*="home"]')?.classList.add('active');
            }
            
            // 滚动到顶部
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function switchAuthTab(tab) {
            // 切换tab按钮
            document.querySelectorAll('.auth-tab').forEach(tabElement => {
                tabElement.classList.remove('active');
            });
            
            document.querySelectorAll('.auth-tab')[tab === 'login' ? 0 : 1].classList.add('active');
            
            // 切换表单
            document.querySelectorAll('.auth-form').forEach(form => {
                form.classList.remove('active');
            });
            
            document.getElementById(`${tab}-form`).classList.add('active');
        }
        
        function toggleUserMenu() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.classList.toggle('active');
            
            // 点击其他地方关闭下拉菜单
            document.addEventListener('click', function closeDropdown(e) {
                if (!e.target.closest('.user-menu')) {
                    dropdown.classList.remove('active');
                    document.removeEventListener('click', closeDropdown);
                }
            });
        }
        
        // ===== 登录注册功能 =====
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const identifier = document.getElementById('login-identifier').value;
            const password = document.getElementById('login-password').value;
            
            if (!identifier || !password) {
                showToast('请填写完整的登录信息', 'error');
                return;
            }
            
            const result = userManager.login(identifier, password);
            
            if (result.success) {
                showToast(`欢迎回来，${result.user.name}！`, 'success');
                showPage('home');
            } else {
                showToast(result.message, 'error');
            }
        });
        
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const school = document.getElementById('register-school').value;
            const major = document.getElementById('register-major').value;
            const studentId = document.getElementById('register-student-id').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            // 表单验证
            if (!name || !email || !school || !password || !confirmPassword) {
                showToast('请填写所有必填字段', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('两次输入的密码不一致', 'error');
                return;
            }
            
            if (password.length < 8) {
                showToast('密码长度至少为8位', 'error');
                return;
            }
            
            const userData = {
                name,
                email,
                school,
                major,
                studentId,
                password
            };
            
            const result = userManager.register(userData);
            
            if (result.success) {
                showToast(`注册成功！欢迎加入校园易生活，${result.user.name}`, 'success');
                showPage('home');
            } else {
                showToast(result.message, 'error');
            }
        });
        
        function loginAsGuest() {
            const result = userManager.loginAsGuest();
            if (result.success) {
                showToast('您已以访客身份登录，可以浏览所有内容。如需发布内容，请注册正式账户。', 'info');
                showPage('home');
            }
        }
        
        function socialLogin(provider) {
            showToast(`${provider === 'wechat' ? '微信' : provider === 'qq' ? 'QQ' : '邮箱'}登录功能开发中，请使用账号密码登录`, 'info');
        }
        
        function showForgotPassword() {
            showToast('忘记密码功能开发中，请联系管理员重置密码', 'info');
        }
        
        function logout() {
            if (confirm('确定要退出登录吗？')) {
                userManager.logout();
                showToast('已成功退出登录', 'success');
                showPage('home');
            }
        }
        
        // ===== 权限检查 =====
        function checkLoginBeforeAction(action) {
            if (!userManager.canPublish()) {
                if (userManager.isLoggedIn() && userManager.getCurrentUser()?.role === 'guest') {
                    showToast('访客无法发布内容，请注册正式账户', 'warning');
                } else {
                    showToast('请先登录以发布内容', 'warning');
                    showPage('auth');
                }
                return false;
            }
            
            // 根据action执行相应操作
            switch(action) {
                case 'publishNotice':
                    showToast('发布通知功能开发中', 'info');
                    break;
                case 'publishLost':
                    showToast('发布寻物启事功能开发中', 'info');
                    break;
                case 'publishFound':
                    showToast('发布失物招领功能开发中', 'info');
                    break;
                case 'publishProduct':
                    showToast('发布商品功能开发中', 'info');
                    break;
                case 'addCourse':
                    showToast('添加课程功能开发中', 'info');
                    break;
            }
            
            return true;
        }
        
        // ===== 用户菜单功能 =====
        function showProfile() {
            const user = userManager.getCurrentUser();
            if (user) {
                let profileInfo = `姓名：${user.name}\n邮箱：${user.email}`;
                if (user.studentId) profileInfo += `\n学号：${user.studentId}`;
                if (user.school) profileInfo += `\n学校：${user.school}`;
                if (user.major) profileInfo += `\n专业：${user.major}`;
                profileInfo += `\n用户类型：${user.role === 'guest' ? '访客用户' : '正式用户'}`;
                
                alert(profileInfo);
            }
        }
        
        function showMyPosts() {
            showToast('我的发布功能开发中', 'info');
        }
        
        function showSettings() {
            showToast('设置功能开发中', 'info');
        }
        
        // ===== 通知功能 =====
        function filterNotices(type) {
            // 更新按钮状态
            document.querySelectorAll('.module-action-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            showToast(`筛选：${type === 'all' ? '全部' : type === 'important' ? '重要' : type === 'academic' ? '学术' : type === 'activity' ? '活动' : '就业'}通知`, 'info');
        }
        
        function searchNotices(keyword) {
            if (keyword) {
                console.log('搜索通知:', keyword);
            }
        }
        
        // ===== 失物招领功能 =====
        function filterLostItems(type) {
            // 更新按钮状态
            document.querySelectorAll('.module-action-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            showToast(`筛选：${type === 'all' ? '全部' : type === 'lost' ? '寻物启事' : type === 'found' ? '失物招领' : '已解决'}`, 'info');
        }
        
        function filterLostItemsByCategory(category) {
            if (category !== 'all') {
                console.log('按类别筛选:', category);
            }
        }
        
        function searchLostItems(keyword) {
            if (keyword) {
                console.log('搜索失物招领:', keyword);
            }
        }
        
        // ===== 二手交易功能 =====
        function filterProducts(category) {
            // 更新按钮状态
            document.querySelectorAll('.module-action-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            showToast(`筛选：${category === 'all' ? '全部' : category === 'book' ? '书籍教材' : category === 'electronic' ? '电子数码' : category === 'clothing' ? '服饰鞋包' : '生活用品'}商品`, 'info');
        }
        
        function sortProducts(order) {
            showToast(`排序方式：${order === 'newest' ? '最新发布' : order === 'price_low' ? '价格从低到高' : '价格从高到低'}`, 'info');
        }
        
        function searchProducts(keyword) {
            if (keyword) {
                console.log('搜索商品:', keyword);
            }
        }
        
        // ===== 课表功能 =====
        function exportSchedule() {
            showToast('课表导出功能开发中', 'info');
        }
        
        // ===== 辅助函数 =====
        function showToast(message, type = 'info') {
            // 移除现有的toast
            const existingToast = document.querySelector('.toast-message');
            if (existingToast) {
                existingToast.remove();
            }
            
            // 创建新的toast
            const toast = document.createElement('div');
            toast.className = `toast-message toast-${type}`;
            toast.innerHTML = `
                <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle'}"></i>
                <span>${message}</span>
            `;
            
            // 添加样式
            toast.style.cssText = `
                position: fixed;
                top: 100px;
                right: 30px;
                background: ${type === 'success' ? 'var(--success)' : 
                           type === 'error' ? 'var(--danger)' : 
                           type === 'warning' ? 'var(--warning)' : 'var(--primary)'};
                color: white;
                padding: 16px 24px;
                border-radius: var(--border-radius-sm);
                box-shadow: var(--shadow);
                z-index: 3000;
                display: flex;
                align-items: center;
                gap: 12px;
                animation: slideIn 0.3s ease;
                max-width: 400px;
            `;
            
            document.body.appendChild(toast);
            
            // 3秒后自动消失
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 3000);
            
            // 添加动画样式
            if (!document.querySelector('#toast-animations')) {
                const style = document.createElement('style');
                style.id = 'toast-animations';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // ===== 初始化 =====
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化用户管理
            userManager.init();
            
            // 添加导航栏滚动效果
            window.addEventListener('scroll', function() {
                const header = document.querySelector('header');
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
            
            // 初始化页面内容
            loadModuleContent('notice');
            loadModuleContent('lost');
            loadModuleContent('trade');
            loadModuleContent('schedule');
            
            console.log('校园易生活平台已加载完毕！');
        });
        
        // 加载模块内容的函数
        function loadModuleContent(module) {
            const container = document.getElementById(`${module === 'schedule' ? 'schedule-content' : `${module}s-container`}`);
            const emptyState = document.getElementById(`no-${module}${module === 'schedule' ? '' : 's'}`);
            
            if (!container) return;
            
            // 示例内容
            let content = '';
            let hasContent = true;
            
            switch(module) {
                case 'notice':
                    content = `
                        <div class="data-grid">
                            <div class="data-card fade-in-up">
                                <div class="data-card-header">
                                    <div>
                                        <div class="data-card-title">2024年秋季学期开学通知</div>
                                        <div style="color: var(--accent); font-size: 0.95rem; font-weight: 600;">
                                            <i class="fas fa-university"></i> 教务处
                                        </div>
                                    </div>
                                    <span class="data-card-badge" style="background: var(--gradient-accent); color: white;">重要</span>
                                </div>
                                <div class="data-card-content">根据学校工作安排，2024年秋季学期将于9月2日正式开学。全体学生请于8月31日-9月1日期间完成报到注册手续。</div>
                                <div class="data-card-footer">
                                    <div class="data-card-meta">
                                        <span><i class="far fa-clock"></i> 2小时前</span>
                                        <span><i class="far fa-eye"></i> 1,245</span>
                                        <span><i class="far fa-comment"></i> 24</span>
                                    </div>
                                    <button class="btn btn-outline" style="padding: 12px 24px;">查看详情</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'lost':
                    content = `
                        <div class="data-grid">
                            <div class="data-card fade-in-up">
                                <div class="data-card-header">
                                    <div>
                                        <div class="data-card-title">寻找丢失的学生证</div>
                                        <div style="color: var(--accent); font-size: 0.95rem; font-weight: 600;">
                                            <i class="fas fa-user-circle"></i> 张同学 · 计算机学院
                                        </div>
                                    </div>
                                    <span class="data-card-badge" style="background: var(--gradient-accent); color: white;">寻物</span>
                                </div>
                                <div class="data-card-content">
                                    <p><strong>丢失时间：</strong>8月20日 14:30</p>
                                    <p><strong>丢失地点：</strong>图书馆附近</p>
                                    <p>8月20日在图书馆附近丢失学生证，姓名：张三，学号：2021123456。如有拾到者请联系，必有酬谢！</p>
                                </div>
                                <div class="data-card-footer">
                                    <div class="data-card-meta">
                                        <span><i class="far fa-clock"></i> 3小时前</span>
                                        <span><i class="fas fa-map-marker-alt"></i> 图书馆</span>
                                        <span><i class="fas fa-tag"></i> 证件</span>
                                    </div>
                                    <button class="btn btn-accent" style="padding: 12px 24px;">我有线索</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'trade':
                    content = `
                        <div class="data-grid">
                            <div class="data-card fade-in-up">
                                <div class="data-card-header">
                                    <div>
                                        <div class="data-card-title">《JavaScript高级程序设计》第四版</div>
                                        <div style="color: var(--accent); font-size: 0.95rem; font-weight: 600;">
                                            <i class="fas fa-user-circle"></i> 李同学 · 经济学院
                                        </div>
                                    </div>
                                    <span class="data-card-badge" style="background: var(--gradient-primary); color: white;">书籍</span>
                                </div>
                                <div class="data-card-content">
                                    <p>几乎全新的JavaScript教材，有少量笔记。原价99元，现35元出售。适合前端开发学习。</p>
                                    <p><strong>成色：</strong>几乎全新</p>
                                    <p><strong>交易方式：</strong>当面交易</p>
                                </div>
                                <div class="data-card-footer">
                                    <div class="data-card-meta">
                                        <span style="font-size: 1.4rem; font-weight: 800; color: var(--accent);">¥35</span>
                                        <span style="text-decoration: line-through; color: var(--gray);">¥99</span>
                                        <span><i class="far fa-clock"></i> 2小时前</span>
                                        <span><i class="far fa-eye"></i> 45</span>
                                    </div>
                                    <button class="btn btn-accent" style="padding: 12px 24px;">立即购买</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'schedule':
                    content = `
                        <div class="empty-state">
                            <div class="empty-state-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h3>暂无课程</h3>
                            <p>您还没有添加任何课程，点击"添加课程"按钮开始创建您的课表</p>
                            <button class="btn btn-primary" onclick="checkLoginBeforeAction('addCourse')">
                                <i class="fas fa-plus"></i> 添加第一门课程
                            </button>
                        </div>
                    `;
                    hasContent = false;
                    break;
            }
            
            container.innerHTML = content;
            
            if (emptyState) {
                if (hasContent) {
                    emptyState.style.display = 'none';
                } else {
                    emptyState.style.display = 'block';
                }
            }
        }
    </script>
</body>
</html>